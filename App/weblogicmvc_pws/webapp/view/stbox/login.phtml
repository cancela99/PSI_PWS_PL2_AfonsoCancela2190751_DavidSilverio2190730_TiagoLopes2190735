<?php

use ArmoredCore\MagicBlankModel;
use ArmoredCore\WebObjects\Asset;
use ArmoredCore\WebObjects\Data;
use ArmoredCore\WebObjects\Session;
use ArmoredCore\WebObjects\URL;
use ArmoredCore\WebObjects\Layout;


//Verifica se o utilizador tem login feito
if(Session::has('userData')){
    Layout::includeLayout('headerLoggedIn');
}else{
    Layout::includeLayout('headerNotLoggedIn');
}

$user = Data::get('userError');
$aviso = Data::get('loginWarning');
$erro = Data::get('loginError');
?>


    <body class="text-center">
    <div class="container" style="margin-top: 100px; margin-bottom: 100px;">
    <form class="form-signin" method="post" action="<?=Url::toRoute('user/login')?>">
        <img class="mb-4" src="<?= Asset::image('dices.png')?>" alt="" width=92" height="92">
        <h1 class="h3 mb-4 font-weight-normal">Shut the Box Game</h1>

            <label for="inputUsername" class=""</label>
            <input type="text" id="inputUsername"  class="form-control" placeholder="Nome de utilizador" required autofocus name="username" value="<?php if(!$user instanceof MagicBlankModel)echo $user?>">

            <label for="inputPassword" class=""></label>
            <input type="password" id="inputPassword" class="form-control" placeholder="Palavra-passe" required name="password">

<?php
//Mostra as mensagens de erro, caso haja algum
if(!$erro instanceof MagicBlankModel){?>
    <div style="background-color: #e66767; border: 1px solid #3c3836; width: 80%; padding: 3%;" class="container mt-5 rounded text-center">
        <h5 style="color: whitesmoke; font-size: 22px"><?php echo $erro ?> <i class="fa fa-exclamation-circle"></i></h5>
    </div>
    <?php
}
//Mostra as mensagens de aviso, caso haja algum
if(!$aviso instanceof MagicBlankModel){?>
    <div style="background-color: #7ce075; border: 1px solid #3c3836; width: 90%; padding: 3%;" class="container mt-5 rounded text-center">
        <h5 style="color: whitesmoke; font-size: 22px"><?php echo $aviso ?> <i class="fa fa-check"></i></h5>
    </div>
    <?php } ?>
        <button class="btn btn-lg btn-primary btn-block mt-4 mb-3" type="submit">Iniciar Sessão</button>
    </form>
        <label>
            Não estás registado? Clica <a href="<?= URL::toRoute('stbox/register/')?>">AQUI</a> para te registares!
        </label>

    </div>


<?php
Layout::includeLayout('footerproject');