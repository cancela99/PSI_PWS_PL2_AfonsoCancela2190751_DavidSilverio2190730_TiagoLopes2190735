<?php

use ArmoredCore\WebObjects\Data;
use ArmoredCore\WebObjects\Layout;
use ArmoredCore\WebObjects\Session;

//Verifica se o utilizador tem login feito
if(/*isset($_SESSION['loggedIn'])*/Session::has('userData')){
    Layout::includeLayout('headerLoggedIn');
}else{
    Layout::includeLayout('headerNotLoggedIn');
}

$top10 = Data::get('top10');

?>

    <body>
    <div style="margin-top: 3%" class="container">
        <h3>Top 10</h3>

        <?php
        if(/*isset($_SESSION['noTop'])*/Session::has('noTop')){
            echo '<br><p style="color:red; text-align: center; font-size: 18px">'.Session::get('noTop').'</p>';
        }
        ?>

        <table class="table table-hover">
            <thead>
            <tr>
                <th>#</th>
                <th>Nome de utilizador</th>
                <th>Data</th>
                <th>Pontos</th>
            </tr>
            </thead>
            <tbody>

            <?php
                $i = 1;
                foreach ($top10 as $top){ ?>
                    <tr>
                        <th><?=$i?></th>
                        <th><?=$top->idusername?></th>
                        <?php $data = $top->data->format('d-m-Y H:i:s');?>
                        <th><?=$data?></th>
                        <th><?=$top->pontuacao?></th>
                    </tr>
                    <?php
                    $i++;
                    if ($i == 11){
                        break;
                    }
            }
            Session::set('noTop',null);?>

            </tbody>
        </table>

    </div>


    </body>

<?php Layout::includeLayout('footerproject');?>